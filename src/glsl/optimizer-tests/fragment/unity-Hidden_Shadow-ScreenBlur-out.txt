uniform vec4 unity_ShadowBlurParams;
uniform sampler2D _MainTex;
uniform vec4 _BlurOffsets[8];
void main ()
{
  int i_1;
  float diffTolerance;
  float radius;
  float dist;
  vec4 mask;
  vec4 coord;
  i_1 = 0;
  vec4 tmpvar_14;
  tmpvar_14.xy = vec2(gl_TexCoord[0].xy);
  tmpvar_14.z = float(vec4(0.000000, 0.000000, 0.000000, 0.000000));
  tmpvar_14.w = float(vec4(0.000000, 0.000000, 0.000000, 0.000000));
  coord = tmpvar_14;
  vec4 tmpvar_16;
  tmpvar_16 = texture2D (_MainTex, tmpvar_14.xy);
  mask = tmpvar_16;
  float tmpvar_18;
  tmpvar_18 = (tmpvar_16.z + (tmpvar_16.w / 255.000000));
  dist = tmpvar_18;
  radius = clamp ((unity_ShadowBlurParams.y / (1.000000 - tmpvar_18)), 0.000000, 1.000000);
  float tmpvar_23;
  tmpvar_23 = unity_ShadowBlurParams.x;
  diffTolerance = tmpvar_23;
  mask.xy = (tmpvar_16.xy * tmpvar_23).xy;
  while (true) {
    if (!((i_1 < 8))) {
      break;
    };
    vec4 tmpvar_25;
    tmpvar_25 = texture2D (_MainTex, (coord + (radius * _BlurOffsets[i_1])).xy);
    mask.xy = (mask.xy + (clamp ((diffTolerance - abs ((dist - (tmpvar_25.z + (tmpvar_25.w / 255.000000))))), 0.000000, 1.000000) * tmpvar_25.xy)).xy;
    i_1 = (i_1 + 1);
  };
  gl_FragData[0] = vec4((mask.x / mask.y));
}

