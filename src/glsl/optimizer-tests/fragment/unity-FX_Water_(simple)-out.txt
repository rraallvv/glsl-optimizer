struct v2f {
  vec4 pos;
  float fog;
  vec2 bumpuv[2];
  vec3 viewDir;
};
uniform sampler2D _BumpMap;
uniform sampler2D _ColorControl;
uniform vec4 _horizonColor;
varying vec4 xlv_FOG;
void main ()
{
  v2f xlt_i;
  xlt_i.pos = vec4 (0.000000, 0.000000, 0.000000, 0.000000);
  xlt_i.fog = xlv_FOG.x;
  vec2 tmpvar_3;
  tmpvar_3.xy = vec2(gl_TexCoord[0]);
  xlt_i.bumpuv[0] = tmpvar_3;
  vec2 tmpvar_5;
  tmpvar_5.xy = vec2(gl_TexCoord[1]);
  xlt_i.bumpuv[1] = tmpvar_5;
  vec3 tmpvar_7;
  tmpvar_7.xyz = vec3(gl_TexCoord[2]);
  xlt_i.viewDir = tmpvar_7;
  v2f i;
  i = xlt_i;
  vec3 bump1;
  vec4 col;
  vec4 tmpvar_22;
  tmpvar_22 = texture2D (_BumpMap, i.bumpuv[0]);
  vec4 normal;
  normal.xy = ((tmpvar_22.wy * 2.000000) - 1.000000);
  float tmpvar_26;
  tmpvar_26 = sqrt (((1.000000 - (normal.x * normal.x)) - (normal.y * normal.y)));
  normal.z = tmpvar_26;
  bump1 = normal.xyz;
  vec4 tmpvar_29;
  tmpvar_29 = texture2D (_BumpMap, i.bumpuv[1]);
  vec4 normal_i0;
  normal_i0.xy = ((tmpvar_29.wy * 2.000000) - 1.000000);
  float tmpvar_33;
  tmpvar_33 = sqrt (((1.000000 - (normal_i0.x * normal_i0.x)) - (normal_i0.y * normal_i0.y)));
  normal_i0.z = tmpvar_33;
  float tmpvar_37;
  tmpvar_37 = dot (i.viewDir, ((bump1 + normal_i0.xyz) * 0.500000));
  vec2 tmpvar_39;
  tmpvar_39.x = tmpvar_37;
  tmpvar_39.y = tmpvar_37;
  vec4 tmpvar_40;
  tmpvar_40 = texture2D (_ColorControl, tmpvar_39);
  vec3 tmpvar_43;
  tmpvar_43 = mix (tmpvar_40.xyz, _horizonColor.xyz, tmpvar_40.www);
  col.xyz = tmpvar_43;
  col.w = _horizonColor.w;
  vec4 tmpvar_11;
  tmpvar_11.xyzw = col;
  gl_FragData[0] = tmpvar_11;
}

