uniform sampler2D _MainTex;
uniform sampler2D _CurTex;
uniform vec4 _AdaptParams;
void main ()
{
  vec2 tmpvar_1;
  tmpvar_1 = gl_TexCoord[0].xy;
  vec4 valNew;
  vec2 delta;
  vec2 tmpvar_2;
  tmpvar_2 = texture2D (_MainTex, tmpvar_1).xy;
  vec2 tmpvar_3;
  tmpvar_3 = ((texture2D (_CurTex, tmpvar_1).xy - tmpvar_2) * _AdaptParams.x);
  delta = tmpvar_3;
  delta.x = (sign (tmpvar_3.x) * max (0.00392157, abs (tmpvar_3.x)));
  delta.y = (vec2((sign (delta.y) * max (0.00392157, abs (delta.y))))).y;
  valNew.xy = (tmpvar_2 + delta);
  valNew.x = max (valNew.x, _AdaptParams.z);
  valNew.y = (vec2(min (valNew.y, _AdaptParams.y))).y;
  valNew.z = (vec3(((valNew.x - valNew.y) + 0.01))).z;
  valNew.w = (vec4((valNew.y / valNew.z))).w;
  gl_FragData[0] = valNew.xyzw;
}

