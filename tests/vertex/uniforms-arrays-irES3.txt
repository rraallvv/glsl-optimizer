#version 300 es
struct v2f {
  highp vec4 pos;
  lowp vec4 color;
  highp vec2 uv;
};
in highp vec4 _glesVertex;
in mediump vec3 _glesNormal;
in highp vec4 _glesMultiTexCoord0;
uniform mediump vec4 unity_LightColor[8];
uniform highp vec4 unity_LightPosition[8];
uniform mediump vec4 unity_LightAtten[8];
uniform highp mat4 glstate_matrix_mvp;
uniform highp mat4 glstate_matrix_modelview0;
uniform highp mat4 glstate_matrix_invtrans_modelview0;
uniform highp vec4 glstate_lightmodel_ambient;
uniform mediump vec4 _Color;
out lowp vec4 xlv_COLOR0;
out highp vec2 xlv_TEXCOORD0;
vec3 ShadeLights (
  in highp vec3 vertex_1,
  in highp vec3 normal_2
)
{
  int i_3;
  highp vec3 lightColor_4;
  highp vec3 viewN_5;
  highp vec3 viewpos_6;
  highp vec4 tmpvar_7;
  tmpvar_7.w = 1.0;
  tmpvar_7.xyz = vertex_1.xyz;
  highp vec3 tmpvar_8;
  tmpvar_8 = (glstate_matrix_modelview0 * tmpvar_7).xyz;
  viewpos_6 = tmpvar_8;
  highp mat3 tmpvar_9;
  highp mat4 tmpvar_10;
  tmpvar_10 = glstate_matrix_invtrans_modelview0;
  tmpvar_9[0u] = tmpvar_10[0u].xyz;
  tmpvar_9[1u] = tmpvar_10[1u].xyz;
  tmpvar_9[2u] = tmpvar_10[2u].xyz;
  highp vec3 tmpvar_11;
  tmpvar_11 = (tmpvar_9 * normal_2);
  viewN_5 = tmpvar_11;
  highp vec3 tmpvar_12;
  tmpvar_12 = glstate_lightmodel_ambient.xyz;
  lightColor_4 = tmpvar_12;
  int tmpvar_13;
  tmpvar_13 = 0;
  i_3 = tmpvar_13;
  while (true) {
    highp float diff_14;
    highp float atten_15;
    highp float lengthSq_16;
    highp vec3 toLight_17;
    if (!((i_3 < 4))) {
      break;
    };
    highp vec3 tmpvar_18;
    tmpvar_18 = (unity_LightPosition[i_3].xyz - (viewpos_6.xyz * unity_LightPosition[i_3].w));
    toLight_17 = tmpvar_18;
    highp float tmpvar_19;
    tmpvar_19 = dot (toLight_17, toLight_17);
    highp float tmpvar_20;
    tmpvar_20 = tmpvar_19;
    lengthSq_16 = tmpvar_20;
    highp float tmpvar_21;
    tmpvar_21 = (1.0 / (1.0 + (lengthSq_16 * unity_LightAtten[i_3].z)));
    atten_15 = tmpvar_21;
    highp vec3 tmpvar_22;
    tmpvar_22 = normalize (toLight_17);
    highp float tmpvar_23;
    tmpvar_23 = dot (viewN_5, tmpvar_22);
    highp float tmpvar_24;
    tmpvar_24 = max (0.0, tmpvar_23);
    highp float tmpvar_25;
    tmpvar_25 = tmpvar_24;
    diff_14 = tmpvar_25;
    highp vec3 tmpvar_26;
    tmpvar_26 = (lightColor_4 + (unity_LightColor[i_3].xyz * (diff_14 * atten_15)));
    lightColor_4 = tmpvar_26;
    int _post_incdec_tmp_27;
    _post_incdec_tmp_27 = i_3;
    int tmpvar_28;
    tmpvar_28 = (i_3 + 1);
    i_3 = tmpvar_28;
  };
  mediump vec3 tmpvar_29;
  tmpvar_29 = _Color.xyz;
  return (lightColor_4 * tmpvar_29);
}

v2f vert (
  in highp vec3 v_30,
  in highp vec3 n_31,
  in highp vec2 uv_32
)
{
  v2f o_33;
  highp vec4 tmpvar_34;
  tmpvar_34.w = 1.0;
  tmpvar_34.xyz = v_30.xyz;
  highp vec4 tmpvar_35;
  tmpvar_35 = (glstate_matrix_mvp * tmpvar_34);
  o_33.pos = tmpvar_35;
  highp vec3 tmpvar_36;
  tmpvar_36 = ShadeLights (v_30, n_31);
  highp vec4 tmpvar_37;
  tmpvar_37.w = 1.0;
  tmpvar_37.xyz = (tmpvar_36 * 2.0).xyz;
  highp vec4 tmpvar_38;
  tmpvar_38 = tmpvar_37;
  o_33.color = tmpvar_38;
  highp vec2 tmpvar_39;
  tmpvar_39 = uv_32;
  o_33.uv = tmpvar_39;
  return o_33;
}

void main ()
{
  v2f xl_retval_40;
  highp vec3 tmpvar_41;
  tmpvar_41 = _glesVertex.xyz;
  mediump vec3 tmpvar_42;
  tmpvar_42 = _glesNormal.xyz;
  highp vec2 tmpvar_43;
  tmpvar_43 = _glesMultiTexCoord0.xy;
  v2f tmpvar_44;
  tmpvar_44 = vert (tmpvar_41, tmpvar_42, tmpvar_43);
  v2f tmpvar_45;
  tmpvar_45 = tmpvar_44;
  xl_retval_40 = tmpvar_45;
  highp vec4 tmpvar_46;
  tmpvar_46 = xl_retval_40.pos.xyzw;
  highp vec4 tmpvar_47;
  tmpvar_47 = tmpvar_46;
  gl_Position = tmpvar_47;
  lowp vec4 tmpvar_48;
  tmpvar_48 = xl_retval_40.color.xyzw;
  lowp vec4 tmpvar_49;
  tmpvar_49 = tmpvar_48;
  xlv_COLOR0 = tmpvar_49;
  highp vec2 tmpvar_50;
  tmpvar_50 = xl_retval_40.uv.xy;
  highp vec2 tmpvar_51;
  tmpvar_51 = tmpvar_50;
  xlv_TEXCOORD0 = tmpvar_51;
}

