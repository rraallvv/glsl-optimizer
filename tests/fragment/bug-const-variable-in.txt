// Used to expose bug in constant variable optimization,
// c would always get assigned 0.6.

uniform float mode;
vec3 func(in vec3 c) {
    if (mode == 2.0)
        return c;
    if (mode == 3.0)
    	discard;
    if (mode == 10.0)
        c = vec3(0.6);
    return c;
}
void main() {
    vec4 c = gl_FragCoord;
    vec3 col = c.xyz;
    col = func(col);
    gl_FragColor = vec4(col, c.w);
}
