#extension GL_ARB_shader_texture_lod : enable
varying vec2 xlv_TEXCOORD0;
uniform vec4 _MainTex_TexelSize;
uniform sampler2D _MainTex;
void main ()
{
  bool tmpvar_1;
  tmpvar_1 = bool(1);
  vec3 tmpvar_2;
  int i;
  bool doneP;
  bool doneN;
  float lumaEndP;
  float lumaEndN;
  vec2 offNP;
  vec2 posP;
  vec2 posN;
  float gradientN;
  float lengthSign;
  float lumaS;
  float lumaN;
  doneN = bool(0);
  doneP = bool(0);
  i = 0;
  vec4 tmpvar_3;
  tmpvar_3.zw = vec2(0.0, 0.0);
  tmpvar_3.xy = (xlv_TEXCOORD0 + (vec2(0.0, -1.0) * _MainTex_TexelSize.xy));
  vec4 tmpvar_4;
  tmpvar_4 = texture2DLod (_MainTex, tmpvar_3.xy, 0.0);
  vec4 tmpvar_5;
  tmpvar_5.zw = vec2(0.0, 0.0);
  tmpvar_5.xy = (xlv_TEXCOORD0 + (vec2(-1.0, 0.0) * _MainTex_TexelSize.xy));
  vec4 tmpvar_6;
  tmpvar_6 = texture2DLod (_MainTex, tmpvar_5.xy, 0.0);
  vec4 tmpvar_7;
  tmpvar_7.zw = vec2(0.0, 0.0);
  tmpvar_7.xy = xlv_TEXCOORD0;
  vec4 tmpvar_8;
  tmpvar_8 = texture2DLod (_MainTex, tmpvar_7.xy, 0.0);
  vec4 tmpvar_9;
  tmpvar_9.zw = vec2(0.0, 0.0);
  tmpvar_9.xy = (xlv_TEXCOORD0 + (vec2(1.0, 0.0) * _MainTex_TexelSize.xy));
  vec4 tmpvar_10;
  tmpvar_10 = texture2DLod (_MainTex, tmpvar_9.xy, 0.0);
  vec4 tmpvar_11;
  tmpvar_11.zw = vec2(0.0, 0.0);
  tmpvar_11.xy = (xlv_TEXCOORD0 + (vec2(0.0, 1.0) * _MainTex_TexelSize.xy));
  vec4 tmpvar_12;
  tmpvar_12 = texture2DLod (_MainTex, tmpvar_11.xy, 0.0);
  float tmpvar_13;
  tmpvar_13 = ((tmpvar_4.y * 1.96321) + tmpvar_4.x);
  lumaN = tmpvar_13;
  float tmpvar_14;
  tmpvar_14 = ((tmpvar_6.y * 1.96321) + tmpvar_6.x);
  float tmpvar_15;
  tmpvar_15 = ((tmpvar_8.y * 1.96321) + tmpvar_8.x);
  float tmpvar_16;
  tmpvar_16 = ((tmpvar_10.y * 1.96321) + tmpvar_10.x);
  float tmpvar_17;
  tmpvar_17 = ((tmpvar_12.y * 1.96321) + tmpvar_12.x);
  lumaS = tmpvar_17;
  float tmpvar_18;
  tmpvar_18 = max (tmpvar_15, max (max (tmpvar_13, tmpvar_14), max (tmpvar_17, tmpvar_16)));
  float tmpvar_19;
  tmpvar_19 = (tmpvar_18 - min (tmpvar_15, min (min (tmpvar_13, tmpvar_14), min (tmpvar_17, tmpvar_16))));
  float tmpvar_20;
  tmpvar_20 = max (0.0416667, (tmpvar_18 * 0.125));
  if ((tmpvar_19 < tmpvar_20)) {
    tmpvar_2 = tmpvar_8.xyz;
    tmpvar_1 = bool(0);
  } else {
    float tmpvar_21;
    tmpvar_21 = min (0.75, (max (0.0, ((abs ((((((tmpvar_13 + tmpvar_14) + tmpvar_16) + tmpvar_17) * 0.25) - tmpvar_15)) / tmpvar_19) - 0.25)) * 1.33333));
    vec4 tmpvar_22;
    tmpvar_22.zw = vec2(0.0, 0.0);
    tmpvar_22.xy = (xlv_TEXCOORD0 + (vec2(-1.0, -1.0) * _MainTex_TexelSize.xy));
    vec4 tmpvar_23;
    tmpvar_23 = texture2DLod (_MainTex, tmpvar_22.xy, 0.0);
    vec4 tmpvar_24;
    tmpvar_24.zw = vec2(0.0, 0.0);
    tmpvar_24.xy = (xlv_TEXCOORD0 + (vec2(1.0, -1.0) * _MainTex_TexelSize.xy));
    vec4 tmpvar_25;
    tmpvar_25 = texture2DLod (_MainTex, tmpvar_24.xy, 0.0);
    vec4 tmpvar_26;
    tmpvar_26.zw = vec2(0.0, 0.0);
    tmpvar_26.xy = (xlv_TEXCOORD0 + (vec2(-1.0, 1.0) * _MainTex_TexelSize.xy));
    vec4 tmpvar_27;
    tmpvar_27 = texture2DLod (_MainTex, tmpvar_26.xy, 0.0);
    vec4 tmpvar_28;
    tmpvar_28.zw = vec2(0.0, 0.0);
    tmpvar_28.xy = (xlv_TEXCOORD0 + _MainTex_TexelSize.xy);
    vec4 tmpvar_29;
    tmpvar_29 = texture2DLod (_MainTex, tmpvar_28.xy, 0.0);
    vec3 tmpvar_30;
    tmpvar_30 = ((((((tmpvar_4.xyz + tmpvar_6.xyz) + tmpvar_8.xyz) + tmpvar_10.xyz) + tmpvar_12.xyz) + (((tmpvar_23.xyz + tmpvar_25.xyz) + tmpvar_27.xyz) + tmpvar_29.xyz)) * vec3(0.111111, 0.111111, 0.111111));
    float tmpvar_31;
    tmpvar_31 = ((tmpvar_23.y * 1.96321) + tmpvar_23.x);
    float tmpvar_32;
    tmpvar_32 = ((tmpvar_25.y * 1.96321) + tmpvar_25.x);
    float tmpvar_33;
    tmpvar_33 = ((tmpvar_27.y * 1.96321) + tmpvar_27.x);
    float tmpvar_34;
    tmpvar_34 = ((tmpvar_29.y * 1.96321) + tmpvar_29.x);
    bool tmpvar_35;
    tmpvar_35 = (((abs ((((0.25 * tmpvar_31) + (-(0.5) * tmpvar_14)) + (0.25 * tmpvar_33))) + abs ((((0.5 * tmpvar_13) + (-(1.0) * tmpvar_15)) + (0.5 * tmpvar_17)))) + abs ((((0.25 * tmpvar_32) + (-(0.5) * tmpvar_16)) + (0.25 * tmpvar_34)))) >= ((abs ((((0.25 * tmpvar_31) + (-(0.5) * tmpvar_13)) + (0.25 * tmpvar_32))) + abs ((((0.5 * tmpvar_14) + (-(1.0) * tmpvar_15)) + (0.5 * tmpvar_16)))) + abs ((((0.25 * tmpvar_33) + (-(0.5) * tmpvar_17)) + (0.25 * tmpvar_34)))));
    float tmpvar_36;
    if (tmpvar_35) {
      tmpvar_36 = -(_MainTex_TexelSize.y);
    } else {
      tmpvar_36 = -(_MainTex_TexelSize.x);
    };
    if (tmpvar_1) {
      lengthSign = tmpvar_36;
      if (!(tmpvar_35)) {
        lumaN = tmpvar_14;
      };
      if (tmpvar_1) {
        if (!(tmpvar_35)) {
          lumaS = tmpvar_16;
        };
        if (tmpvar_1) {
          float tmpvar_37;
          tmpvar_37 = abs ((lumaN - tmpvar_15));
          gradientN = tmpvar_37;
          float tmpvar_38;
          tmpvar_38 = abs ((lumaS - tmpvar_15));
          lumaN = ((lumaN + tmpvar_15) * 0.5);
          float tmpvar_39;
          tmpvar_39 = ((lumaS + tmpvar_15) * 0.5);
          lumaS = tmpvar_39;
          bool tmpvar_40;
          tmpvar_40 = (tmpvar_37 >= tmpvar_38);
          if (!(tmpvar_40)) {
            lumaN = tmpvar_39;
          };
          if (tmpvar_1) {
            if (!(tmpvar_40)) {
              gradientN = tmpvar_38;
            };
            if (tmpvar_1) {
              if (!(tmpvar_40)) {
                lengthSign = (tmpvar_36 * -1.0);
              };
              if (tmpvar_1) {
                float tmpvar_41;
                if (tmpvar_35) {
                  tmpvar_41 = 0.0;
                } else {
                  tmpvar_41 = (lengthSign * 0.5);
                };
                if (tmpvar_1) {
                  posN.x = (xlv_TEXCOORD0.x + tmpvar_41);
                  float tmpvar_42;
                  if (tmpvar_35) {
                    tmpvar_42 = (lengthSign * 0.5);
                  } else {
                    tmpvar_42 = 0.0;
                  };
                  if (tmpvar_1) {
                    posN.y = (xlv_TEXCOORD0.y + tmpvar_42);
                    gradientN = (gradientN * 0.25);
                    posP = posN;
                    vec2 tmpvar_43;
                    if (tmpvar_35) {
                      vec2 tmpvar_44;
                      tmpvar_44.y = 0.0;
                      tmpvar_44.x = _MainTex_TexelSize.x;
                      tmpvar_43 = tmpvar_44;
                    } else {
                      vec2 tmpvar_45;
                      tmpvar_45.x = 0.0;
                      tmpvar_45.y = _MainTex_TexelSize.y;
                      tmpvar_43 = tmpvar_45;
                    };
                    if (tmpvar_1) {
                      offNP = tmpvar_43;
                      lumaEndN = lumaN;
                      lumaEndP = lumaN;
                      posN = (posN + (tmpvar_43 * vec2(-1.0, -1.0)));
                      posP = (posP + tmpvar_43);
                      while (true) {
                        if ((i >= 16)) {
                          break;
                        };
                        if (!(doneN)) {
                          vec4 tmpvar_46;
                          tmpvar_46.zw = vec2(0.0, 0.0);
                          tmpvar_46.xy = posN;
                          vec4 tmpvar_47;
                          tmpvar_47 = texture2DLod (_MainTex, tmpvar_46.xy, 0.0);
                          lumaEndN = ((tmpvar_47.y * 1.96321) + tmpvar_47.x);
                        };
                        if (!(doneP)) {
                          vec4 tmpvar_48;
                          tmpvar_48.zw = vec2(0.0, 0.0);
                          tmpvar_48.xy = posP;
                          vec4 tmpvar_49;
                          tmpvar_49 = texture2DLod (_MainTex, tmpvar_48.xy, 0.0);
                          lumaEndP = ((tmpvar_49.y * 1.96321) + tmpvar_49.x);
                        };
                        bool tmpvar_50;
                        if (doneN) {
                          tmpvar_50 = bool(1);
                        } else {
                          tmpvar_50 = (abs ((lumaEndN - lumaN)) >= gradientN);
                        };
                        doneN = tmpvar_50;
                        bool tmpvar_51;
                        if (doneP) {
                          tmpvar_51 = bool(1);
                        } else {
                          tmpvar_51 = (abs ((lumaEndP - lumaN)) >= gradientN);
                        };
                        doneP = tmpvar_51;
                        bool tmpvar_52;
                        if (tmpvar_50) {
                          tmpvar_52 = tmpvar_51;
                        } else {
                          tmpvar_52 = bool(0);
                        };
                        if (tmpvar_52) {
                          break;
                        };
                        if (!(tmpvar_50)) {
                          posN = (posN - offNP);
                        };
                        if (!(tmpvar_51)) {
                          posP = (posP + offNP);
                        };
                        i = (i + 1);
                      };
                      float tmpvar_53;
                      if (tmpvar_35) {
                        tmpvar_53 = (xlv_TEXCOORD0.x - posN.x);
                      } else {
                        tmpvar_53 = (xlv_TEXCOORD0.y - posN.y);
                      };
                      if (tmpvar_1) {
                        float tmpvar_54;
                        if (tmpvar_35) {
                          tmpvar_54 = (posP.x - xlv_TEXCOORD0.x);
                        } else {
                          tmpvar_54 = (posP.y - xlv_TEXCOORD0.y);
                        };
                        if (tmpvar_1) {
                          bool tmpvar_55;
                          tmpvar_55 = (tmpvar_53 < tmpvar_54);
                          float tmpvar_56;
                          if (tmpvar_55) {
                            tmpvar_56 = lumaEndN;
                          } else {
                            tmpvar_56 = lumaEndP;
                          };
                          if (tmpvar_1) {
                            lumaEndN = tmpvar_56;
                            if ((((tmpvar_15 - lumaN) < 0.0) == ((tmpvar_56 - lumaN) < 0.0))) {
                              lengthSign = 0.0;
                            };
                            if (tmpvar_1) {
                              float tmpvar_57;
                              tmpvar_57 = (tmpvar_54 + tmpvar_53);
                              float tmpvar_58;
                              if (tmpvar_55) {
                                tmpvar_58 = tmpvar_53;
                              } else {
                                tmpvar_58 = tmpvar_54;
                              };
                              if (tmpvar_1) {
                                float tmpvar_59;
                                tmpvar_59 = ((0.5 + (tmpvar_58 * (-1.0 / tmpvar_57))) * lengthSign);
                                float tmpvar_60;
                                if (tmpvar_35) {
                                  tmpvar_60 = 0.0;
                                } else {
                                  tmpvar_60 = tmpvar_59;
                                };
                                if (tmpvar_1) {
                                  float tmpvar_61;
                                  if (tmpvar_35) {
                                    tmpvar_61 = tmpvar_59;
                                  } else {
                                    tmpvar_61 = 0.0;
                                  };
                                  if (tmpvar_1) {
                                    vec2 tmpvar_62;
                                    tmpvar_62.x = (xlv_TEXCOORD0.x + tmpvar_60);
                                    tmpvar_62.y = (xlv_TEXCOORD0.y + tmpvar_61);
                                    vec4 tmpvar_63;
                                    tmpvar_63.zw = vec2(0.0, 0.0);
                                    tmpvar_63.xy = tmpvar_62;
                                    vec4 tmpvar_64;
                                    tmpvar_64 = texture2DLod (_MainTex, tmpvar_63.xy, 0.0);
                                    vec3 tmpvar_65;
                                    tmpvar_65.x = -(tmpvar_21);
                                    tmpvar_65.y = -(tmpvar_21);
                                    tmpvar_65.z = -(tmpvar_21);
                                    tmpvar_2 = ((tmpvar_65 * tmpvar_64.xyz) + ((tmpvar_30 * vec3(tmpvar_21)) + tmpvar_64.xyz));
                                    tmpvar_1 = bool(0);
                                  };
                                };
                              };
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        };
      };
    };
  };
  vec4 tmpvar_66;
  tmpvar_66.w = 0.0;
  tmpvar_66.xyz = tmpvar_2;
  gl_FragData[0] = tmpvar_66;
}

