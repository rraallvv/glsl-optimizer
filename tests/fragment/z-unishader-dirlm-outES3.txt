#version 300 es
out mediump vec4 _fragData;
uniform highp vec3 _WorldSpaceCameraPos;
uniform sampler2D _MainTex;
uniform sampler2D _DetailAlbedoMap;
uniform sampler2D _AlphaMap;
uniform sampler2D _Occlusion;
uniform sampler2D _DetailNormalMap;
uniform highp float _DetailNormalMapScale;
uniform sampler2D _BumpMap;
uniform highp float _BumpScale;
uniform highp float _Exposure;
uniform highp vec4 _Color;
uniform sampler2D _SpecGlossMap;
uniform sampler2D _ShadowMapTexture;
uniform lowp samplerCube _SpecCube;
uniform sampler2D unity_Lightmap;
uniform sampler2D unity_LightmapInd;
uniform highp float _SelfIllumScale;
uniform sampler2D _SelfIllum;
in highp vec4 xlv_TEXCOORD0;
in highp vec4 xlv_TEXCOORD1;
in highp vec3 xlv_TEXCOORD2;
in highp vec4 xlv_TEXCOORD3;
in highp vec3 xlv_TEXCOORD4;
in highp vec4 xlv_TEXCOORD5;
void main ()
{
  highp vec3 tmpvar_1;
  highp vec3 tmpvar_2;
  tmpvar_1 = xlv_TEXCOORD3.xyz;
  tmpvar_2 = (((xlv_TEXCOORD2.yzx * xlv_TEXCOORD3.zxy) - (xlv_TEXCOORD2.zxy * xlv_TEXCOORD3.yzx)) * xlv_TEXCOORD3.www);
  highp mat3 tmpvar_3;
  tmpvar_3[0u].x = tmpvar_1.x;
  tmpvar_3[0u].y = tmpvar_2.x;
  tmpvar_3[0u].z = xlv_TEXCOORD2.x;
  tmpvar_3[1u].x = tmpvar_1.y;
  tmpvar_3[1u].y = tmpvar_2.y;
  tmpvar_3[1u].z = xlv_TEXCOORD2.y;
  tmpvar_3[2u].x = tmpvar_1.z;
  tmpvar_3[2u].y = tmpvar_2.z;
  tmpvar_3[2u].z = xlv_TEXCOORD2.z;
  lowp vec3 normal_4;
  normal_4.xy = ((texture (_BumpMap, xlv_TEXCOORD0.xy).wy * 2.0) - 1.0);
  normal_4.xy = (normal_4.xy * _BumpScale);
  normal_4.z = sqrt((1.0 - clamp (
    dot (normal_4.xy, normal_4.xy)
  , 0.0, 1.0)));
  lowp vec3 normal_5;
  normal_5.xy = ((texture (_DetailNormalMap, xlv_TEXCOORD0.zw).wy * 2.0) - 1.0);
  normal_5.xy = (normal_5.xy * _DetailNormalMapScale);
  normal_5.z = sqrt((1.0 - clamp (
    dot (normal_5.xy, normal_5.xy)
  , 0.0, 1.0)));
  lowp vec3 tmpvar_6;
  tmpvar_6.xy = (normal_4.xy + normal_5.xy);
  tmpvar_6.z = (normal_4.z * normal_5.z);
  lowp vec3 tmpvar_7;
  tmpvar_7 = normalize(tmpvar_6);
  lowp vec3 tmpvar_8;
  tmpvar_8 = (tmpvar_7 * tmpvar_3);
  highp vec3 tmpvar_9;
  tmpvar_9 = normalize((xlv_TEXCOORD1.xyz - _WorldSpaceCameraPos));
  lowp vec4 tmpvar_10;
  tmpvar_10 = texture (_SpecGlossMap, xlv_TEXCOORD0.xy);
  lowp float tmpvar_11;
  tmpvar_11 = dot (tmpvar_10.xyz, vec3(0.299, 0.587, 0.114));
  lowp float tmpvar_12;
  tmpvar_12 = (1.0 - tmpvar_10.w);
  lowp vec4 tmpvar_13;
  tmpvar_13.xyz = (tmpvar_9 - (2.0 * (
    dot (tmpvar_8, tmpvar_9)
   * tmpvar_8)));
  tmpvar_13.w = (tmpvar_12 * 5.0);
  lowp vec4 tmpvar_14;
  tmpvar_14 = textureLod (_SpecCube, tmpvar_13.xyz, tmpvar_13.w);
  lowp float tmpvar_15;
  tmpvar_15 = (tmpvar_14.w * tmpvar_14.w);
  lowp vec2 tmpvar_16;
  tmpvar_16.x = tmpvar_15;
  tmpvar_16.y = (tmpvar_14.w * tmpvar_15);
  lowp vec3 tmpvar_17;
  tmpvar_17 = (((tmpvar_14.xyz * 
    dot (vec2(0.7532, 0.2468), tmpvar_16)
  ) * _Exposure) * texture (_Occlusion, xlv_TEXCOORD0.xy).x);
  lowp vec4 tmpvar_18;
  tmpvar_18 = texture (unity_Lightmap, xlv_TEXCOORD4.xy);
  lowp vec4 tmpvar_19;
  tmpvar_19 = texture (unity_LightmapInd, xlv_TEXCOORD4.xy);
  highp mat3 tmpvar_20;
  tmpvar_20[0u].x = 0.816497;
  tmpvar_20[0u].y = -0.408248;
  tmpvar_20[0u].z = -0.408248;
  tmpvar_20[1u].x = 0.0;
  tmpvar_20[1u].y = 0.707107;
  tmpvar_20[1u].z = -0.707107;
  tmpvar_20[2u].x = 0.57735;
  tmpvar_20[2u].y = 0.57735;
  tmpvar_20[2u].z = 0.57735;
  lowp vec3 tmpvar_21;
  tmpvar_21 = ((8.0 * tmpvar_19.w) * tmpvar_19.xyz);
  highp vec3 v_22;
  v_22.x = tmpvar_20[0].x;
  v_22.y = tmpvar_20[1].x;
  v_22.z = tmpvar_20[2].x;
  highp vec3 v_23;
  v_23.x = tmpvar_20[0].y;
  v_23.y = tmpvar_20[1].y;
  v_23.z = tmpvar_20[2].y;
  highp vec3 v_24;
  v_24.x = tmpvar_20[0].z;
  v_24.y = tmpvar_20[1].z;
  v_24.z = tmpvar_20[2].z;
  lowp vec3 tmpvar_25;
  tmpvar_25 = normalize((normalize(
    (((tmpvar_21.x * v_22) + (tmpvar_21.y * v_23)) + (tmpvar_21.z * v_24))
  ) * tmpvar_3));
  lowp vec3 lightColor_26;
  lightColor_26 = (textureProj (_ShadowMapTexture, xlv_TEXCOORD5).x * ((
    (8.0 * tmpvar_18.w)
   * tmpvar_18.xyz) * dot (
    clamp ((tmpvar_20 * tmpvar_7), 0.0, 1.0)
  , tmpvar_21)));
  highp vec3 viewDir_27;
  viewDir_27 = -(tmpvar_9);
  lowp vec3 tmpvar_28;
  tmpvar_28 = normalize((tmpvar_25 + viewDir_27));
  lowp float tmpvar_29;
  tmpvar_29 = max (0.0, dot (tmpvar_8, tmpvar_25));
  lowp float tmpvar_30;
  tmpvar_30 = max (0.0, dot (tmpvar_8, tmpvar_28));
  lowp float tmpvar_31;
  tmpvar_31 = max (0.0, dot (tmpvar_8, viewDir_27));
  lowp float tmpvar_32;
  tmpvar_32 = max (0.0, dot (viewDir_27, tmpvar_28));
  lowp float tmpvar_33;
  tmpvar_33 = (tmpvar_32 + 1e-05);
  lowp float tmpvar_34;
  tmpvar_34 = ((1.0/((
    pow (tmpvar_12, 4.0)
   + 1e-05))) - 2.0);
  lowp float tmpvar_35;
  tmpvar_35 = (0.5 + ((2.0 * 
    pow (max (0.0, dot (tmpvar_25, tmpvar_28)), 2.0)
  ) * tmpvar_12));
  lowp vec4 tmpvar_36;
  tmpvar_36.xyz = (((
    (min (((_Color.xyz * texture (_MainTex, xlv_TEXCOORD0.xy).xyz) * (2.0 * texture (_DetailAlbedoMap, xlv_TEXCOORD0.zw).xyz)), (vec3(1.0, 1.0, 1.0) - tmpvar_11)) * (((
      (1.0 + ((tmpvar_35 - 1.0) * pow ((1.00001 - tmpvar_29), 5.0)))
     * 
      (1.0 + ((tmpvar_35 - 1.0) * pow ((1.00001 - tmpvar_31), 5.0)))
    ) * tmpvar_29) * lightColor_26))
   + 
    (tmpvar_10.xyz * (tmpvar_17 + (lightColor_26 * max (0.0, 
      ((((tmpvar_11 + 
        ((1.0 - tmpvar_11) * pow (abs((1.0 - tmpvar_32)), 5.0))
      ) * min (1.0, 
        min ((((2.0 * tmpvar_30) * tmpvar_31) / tmpvar_33), (((2.0 * tmpvar_30) * tmpvar_29) / tmpvar_33))
      )) * max (0.0, (
        pow (tmpvar_30, tmpvar_34)
       * 
        ((tmpvar_34 + 1.0) / 6.28318)
      ))) / ((4.0 * tmpvar_31) + 1e-05))
    ))))
  ) + (
    (((1.0 - dot (tmpvar_10.xyz, vec3(0.299, 0.587, 0.114))) * (1.0 - tmpvar_12)) * pow (abs((1.0 - tmpvar_31)), 5.0))
   * tmpvar_17)) + (texture (_SelfIllum, xlv_TEXCOORD0.xy).xyz * _SelfIllumScale));
  tmpvar_36.w = (texture (_AlphaMap, xlv_TEXCOORD0.xy).w * _Color.w);
  _fragData = tmpvar_36;
}


// stats: 146 alu 12 tex 0 flow
// inputs: 6
//  #0: xlv_TEXCOORD0 (high float) 4x1 [-1]
//  #1: xlv_TEXCOORD1 (high float) 4x1 [-1]
//  #2: xlv_TEXCOORD2 (high float) 3x1 [-1]
//  #3: xlv_TEXCOORD3 (high float) 4x1 [-1]
//  #4: xlv_TEXCOORD4 (high float) 3x1 [-1]
//  #5: xlv_TEXCOORD5 (high float) 4x1 [-1]
// uniforms: 6 (total size: 0)
//  #0: _WorldSpaceCameraPos (high float) 3x1 [-1]
//  #1: _DetailNormalMapScale (high float) 1x1 [-1]
//  #2: _BumpScale (high float) 1x1 [-1]
//  #3: _Exposure (high float) 1x1 [-1]
//  #4: _Color (high float) 4x1 [-1]
//  #5: _SelfIllumScale (high float) 1x1 [-1]
// textures: 12
//  #0: _MainTex (low 2d) 0x0 [-1]
//  #1: _DetailAlbedoMap (low 2d) 0x0 [-1]
//  #2: _AlphaMap (low 2d) 0x0 [-1]
//  #3: _Occlusion (low 2d) 0x0 [-1]
//  #4: _DetailNormalMap (low 2d) 0x0 [-1]
//  #5: _BumpMap (low 2d) 0x0 [-1]
//  #6: _SpecGlossMap (low 2d) 0x0 [-1]
//  #7: _ShadowMapTexture (low 2d) 0x0 [-1]
//  #8: _SpecCube (low cube) 0x0 [-1]
//  #9: unity_Lightmap (low 2d) 0x0 [-1]
//  #10: unity_LightmapInd (low 2d) 0x0 [-1]
//  #11: _SelfIllum (low 2d) 0x0 [-1]
