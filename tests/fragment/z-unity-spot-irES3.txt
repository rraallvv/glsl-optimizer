#version 300 es
struct SurfaceOutput {
  lowp vec3 Albedo;
  lowp vec3 Normal;
  lowp vec3 Emission;
  mediump float Specular;
  lowp float Gloss;
  lowp float Alpha;
};
struct Input {
  highp vec2 uv_MainTex;
};
struct v2f_surf {
  highp vec4 pos;
  highp vec2 pack0;
  lowp vec3 worldNormal;
  highp vec3 worldPos;
};
layout(location=0) out mediump vec4 _glesFragData[4];
uniform highp vec4 _WorldSpaceLightPos0;
uniform lowp vec4 _LightColor0;
uniform sampler2D _LightTexture0;
uniform mediump mat4 _LightMatrix0;
uniform sampler2D _LightTextureB0;
uniform sampler2D _MainTex;
uniform highp vec4 _MainTex_ST;
in highp vec2 xlv_TEXCOORD0;
in lowp vec3 xlv_TEXCOORD1;
in highp vec3 xlv_TEXCOORD2;
lowp vec4 LightingLambert (
  in SurfaceOutput s_1,
  in lowp vec3 lightDir_2,
  in lowp float atten_3
)
{
  lowp vec4 c_4;
  lowp float diff_5;
  lowp float tmpvar_6;
  tmpvar_6 = dot (s_1.Normal, lightDir_2);
  lowp float tmpvar_7;
  tmpvar_7 = max (0.0, tmpvar_6);
  lowp float tmpvar_8;
  tmpvar_8 = tmpvar_7;
  diff_5 = tmpvar_8;
  lowp vec3 tmpvar_9;
  tmpvar_9 = ((s_1.Albedo * _LightColor0.xyz) * ((diff_5 * atten_3) * 2.0));
  c_4.xyz = tmpvar_9.xyz.xyz;
  lowp float tmpvar_10;
  tmpvar_10 = s_1.Alpha;
  c_4.w = vec4(tmpvar_10).w;
  return c_4;
}

lowp float UnitySpotAttenuate (
  in mediump vec3 LightCoord_11
)
{
  mediump float tmpvar_12;
  tmpvar_12 = dot (LightCoord_11, LightCoord_11);
  mediump vec2 tmpvar_13;
  tmpvar_13 = vec2(tmpvar_12);
  lowp vec4 tmpvar_14;
  tmpvar_14 = texture (_LightTextureB0, tmpvar_13);
  return tmpvar_14.w;
}

lowp float UnitySpotCookie (
  in mediump vec4 LightCoord_15
)
{
  lowp vec4 tmpvar_16;
  tmpvar_16 = texture (_LightTexture0, ((LightCoord_15.xy / LightCoord_15.w) + 0.5));
  return tmpvar_16.w;
}

vec3 UnityWorldSpaceLightDir (
  in highp vec3 worldPos_17
)
{
  return (_WorldSpaceLightPos0.xyz - worldPos_17);
}

void surf (
  in Input IN_18,
  inout SurfaceOutput o_19
)
{
  mediump vec4 c_20;
  lowp vec4 tmpvar_21;
  tmpvar_21 = texture (_MainTex, IN_18.uv_MainTex);
  lowp vec4 tmpvar_22;
  tmpvar_22 = tmpvar_21;
  c_20 = tmpvar_22;
  mediump vec3 tmpvar_23;
  tmpvar_23 = c_20.xyz;
  o_19.Albedo = tmpvar_23;
  mediump float tmpvar_24;
  tmpvar_24 = c_20.w;
  o_19.Alpha = tmpvar_24;
}

lowp vec4 frag_surf (
  in v2f_surf IN_25
)
{
  lowp vec4 c_26;
  lowp float atten_27;
  mediump vec4 lightCoord_28;
  SurfaceOutput o_29;
  highp vec3 lightDir_30;
  highp vec3 worldPos_31;
  Input surfIN_32;
  highp vec2 tmpvar_33;
  tmpvar_33 = IN_25.pack0.xy;
  surfIN_32.uv_MainTex = tmpvar_33;
  highp vec3 tmpvar_34;
  tmpvar_34 = IN_25.worldPos;
  worldPos_31 = tmpvar_34;
  highp vec3 tmpvar_35;
  tmpvar_35 = UnityWorldSpaceLightDir (worldPos_31);
  highp vec3 tmpvar_36;
  tmpvar_36 = normalize (tmpvar_35);
  highp vec3 tmpvar_37;
  tmpvar_37 = tmpvar_36;
  lightDir_30 = tmpvar_37;
  highp vec3 tmpvar_38;
  tmpvar_38 = vec3(0.0, 0.0, 0.0);
  o_29.Albedo = tmpvar_38;
  highp vec3 tmpvar_39;
  tmpvar_39 = vec3(0.0, 0.0, 0.0);
  o_29.Emission = tmpvar_39;
  highp float tmpvar_40;
  tmpvar_40 = 0.0;
  o_29.Specular = tmpvar_40;
  highp float tmpvar_41;
  tmpvar_41 = 0.0;
  o_29.Alpha = tmpvar_41;
  highp float tmpvar_42;
  tmpvar_42 = 0.0;
  o_29.Gloss = tmpvar_42;
  lowp vec3 tmpvar_43;
  tmpvar_43 = IN_25.worldNormal;
  o_29.Normal = tmpvar_43;
  surf (surfIN_32, o_29);
  highp vec4 tmpvar_44;
  tmpvar_44.w = 1.0;
  tmpvar_44.xyz = worldPos_31.xyz;
  highp vec4 tmpvar_45;
  tmpvar_45 = (_LightMatrix0 * tmpvar_44);
  lightCoord_28 = tmpvar_45;
  lowp float tmpvar_46;
  tmpvar_46 = UnitySpotCookie (lightCoord_28);
  lowp float tmpvar_47;
  tmpvar_47 = UnitySpotAttenuate (lightCoord_28.xyz);
  mediump float tmpvar_48;
  tmpvar_48 = (((
    float((lightCoord_28.z > 0.0))
   * tmpvar_46) * tmpvar_47) * 1.0);
  atten_27 = tmpvar_48;
  highp vec4 tmpvar_49;
  tmpvar_49 = vec4(0.0, 0.0, 0.0, 0.0);
  c_26 = tmpvar_49;
  lowp vec4 tmpvar_50;
  tmpvar_50 = LightingLambert (o_29, lightDir_30, atten_27);
  lowp vec4 tmpvar_51;
  tmpvar_51 = (c_26 + tmpvar_50);
  c_26 = tmpvar_51;
  highp float tmpvar_52;
  tmpvar_52 = 0.0;
  c_26.w = vec4(tmpvar_52).w;
  return c_26;
}

void main ()
{
  v2f_surf xlt_IN_53;
  lowp vec4 xl_retval_54;
  highp vec4 tmpvar_55;
  tmpvar_55 = vec4(0.0, 0.0, 0.0, 0.0);
  xlt_IN_53.pos = tmpvar_55;
  highp vec2 tmpvar_56;
  tmpvar_56 = xlv_TEXCOORD0.xy;
  highp vec2 tmpvar_57;
  tmpvar_57 = tmpvar_56;
  xlt_IN_53.pack0 = tmpvar_57;
  lowp vec3 tmpvar_58;
  tmpvar_58 = xlv_TEXCOORD1.xyz;
  lowp vec3 tmpvar_59;
  tmpvar_59 = tmpvar_58;
  xlt_IN_53.worldNormal = tmpvar_59;
  highp vec3 tmpvar_60;
  tmpvar_60 = xlv_TEXCOORD2.xyz;
  highp vec3 tmpvar_61;
  tmpvar_61 = tmpvar_60;
  xlt_IN_53.worldPos = tmpvar_61;
  lowp vec4 tmpvar_62;
  tmpvar_62 = frag_surf (xlt_IN_53);
  lowp vec4 tmpvar_63;
  tmpvar_63 = tmpvar_62;
  xl_retval_54 = tmpvar_63;
  lowp vec4 tmpvar_64;
  tmpvar_64 = xl_retval_54.xyzw;
  lowp vec4 tmpvar_65;
  tmpvar_65 = tmpvar_64;
  _glesFragData[0] = tmpvar_65;
}

